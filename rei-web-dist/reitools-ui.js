/*! For license information please see reitools-ui.js.LICENSE.txt */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React")):"function"==typeof define&&define.amd?define(["React"],e):"object"==typeof exports?exports.ReiToolsUI=e(require("React")):n.ReiToolsUI=e(n.React)}(this,n=>(()=>{"use strict";var e={20:(n,e,t)=>{var o=t(883),r=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(n,e,t){var o,l={},c=null,p=null;for(o in void 0!==t&&(c=""+t),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(p=e.ref),e)a.call(e,o)&&!s.hasOwnProperty(o)&&(l[o]=e[o]);if(n&&n.defaultProps)for(o in e=n.defaultProps)void 0===l[o]&&(l[o]=e[o]);return{$$typeof:r,type:n,key:c,ref:p,props:l,_owner:i.current}}e.jsx=l,e.jsxs=l},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},i=[],s=0;s<n.length;s++){var l=n[s],c=o.base?l[0]+o.base:l[0],p=a[c]||0,d="".concat(c," ").concat(p);a[c]=p+1;var u=t(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var g=r(f,o);o.byIndex=s,e.splice(s,0,{identifier:d,updater:g,references:1})}i.push(d)}return i}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=o(n=n||[],r=r||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var s=t(a[i]);e[s].references--}for(var l=o(n,r),c=0;c<a.length;c++){var p=t(a[c]);0===e[p].references&&(e[p].updater(),e.splice(p,1))}a=l}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},157:n=>{n.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3e%3cpath stroke=%27%23cccccc%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27M6 8l4 4 4-4%27/%3e%3c/svg%3e"},267:(n,e,t)=>{t.d(e,{A:()=>x});var o=t(601),r=t.n(o),a=t(314),i=t.n(a),s=t(417),l=t.n(s),c=new URL(t(401),t.b),p=new URL(t(429),t.b),d=new URL(t(157),t.b),u=new URL(t(567),t.b),f=i()(r()),g=l()(c),m=l()(p),h=l()(d),b=l()(u);f.push([n.id,`.reitools-panel {\n  font-size: 13px;\n}\n\n.reitools-tabs {\n  display: flex;\n  border-bottom: 1px solid #404040;\n  margin-bottom: 16px;\n}\n\n.tab {\n  background: none;\n  border: none;\n  color: #999999;\n  padding: 8px 16px;\n  cursor: pointer;\n  font-size: 13px;\n  transition: all 0.2s;\n  border-bottom: 2px solid transparent;\n}\n\n.tab:hover {\n  color: #ffffff;\n  background: #333333;\n}\n\n.tab.active {\n  color: #ffffff;\n  border-bottom-color: #007acc;\n}\n\n.reitools-content {\n  height: calc(100% - 40px);\n  overflow-y: auto;\n}\n\n.tools-section h3,\n.config-section h3,\n.info-section h3 {\n  color: #ffffff;\n  font-size: 14px;\n  margin: 0 0 12px 0;\n  font-weight: 600;\n}\n\n.tool-group {\n  margin-bottom: 20px;\n}\n\n.tool-button {\n  display: block;\n  width: 100%;\n  background: #333333;\n  border: 1px solid #404040;\n  color: #ffffff;\n  padding: 10px 12px;\n  margin-bottom: 6px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 13px;\n  text-align: left;\n  transition: all 0.2s;\n}\n\n.tool-button:hover {\n  background: #404040;\n  border-color: #555555;\n}\n\n.tool-button:active {\n  background: #2a2a2a;\n}\n\n.config-group {\n  margin-bottom: 20px;\n}\n\n.config-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  color: #cccccc;\n  cursor: pointer;\n}\n\n.config-item input[type="checkbox"] {\n  margin-right: 8px;\n}\n\n.config-item input[type="range"] {\n  width: 100px;\n}\n\n.config-item select {\n  background: #333333;\n  border: 1px solid #404040;\n  color: #ffffff;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n.info-section p {\n  color: #cccccc;\n  margin: 8px 0;\n  line-height: 1.4;\n}\n\n.info-section ul {\n  color: #cccccc;\n  padding-left: 20px;\n  margin: 12px 0;\n}\n\n.info-section li {\n  margin-bottom: 4px;\n}\n\n.links {\n  margin-top: 20px;\n  padding-top: 16px;\n  border-top: 1px solid #404040;\n}\n\n.links a {\n  color: #007acc;\n  text-decoration: none;\n  font-size: 13px;\n}\n\n.links a:hover {\n  text-decoration: underline;\n}\n\n/* 参数聚焦相关样式 */\n.param-focus-section {\n  padding: 0;\n}\n\n/* 按钮组样式 */\n.button-group {\n  display: flex;\n  gap: 8px;\n  margin: 12px 0;\n}\n\n/* 刷新按钮样式 */\n.refresh-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  width: auto;\n  max-width: 160px;\n  background: linear-gradient(135deg, #007acc 0%, #0099ff 100%);\n  border: none;\n  color: #ffffff;\n  padding: 8px 14px;\n  margin: 0;\n  border-radius: 4px;\n  flex: 1;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  font-family: inherit;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: \n    0 1px 4px rgba(0, 122, 204, 0.3),\n    0 1px 2px rgba(0, 0, 0, 0.2);\n  position: relative;\n  overflow: hidden;\n}\n\n.refresh-button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, \n    transparent, \n    rgba(255, 255, 255, 0.2), \n    transparent\n  );\n  transition: left 0.5s ease;\n}\n\n.refresh-button:hover {\n  background: linear-gradient(135deg, #0066aa 0%, #0088dd 100%);\n  transform: translateY(-2px);\n  box-shadow: \n    0 4px 16px rgba(0, 122, 204, 0.4),\n    0 2px 6px rgba(0, 0, 0, 0.3);\n}\n\n.refresh-button:hover::before {\n  left: 100%;\n}\n\n.refresh-button:active {\n  transform: translateY(0);\n  box-shadow: \n    0 2px 4px rgba(0, 122, 204, 0.3),\n    0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.refresh-icon {\n  font-size: 14px;\n  display: inline-block;\n  transition: transform 0.3s ease;\n}\n\n.refresh-button:hover .refresh-icon {\n  transform: rotate(180deg);\n}\n\n.refresh-button:active .refresh-icon {\n  transform: rotate(360deg);\n}\n\n/* 运行按钮样式 */\n.run-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  width: auto;\n  max-width: 120px;\n  background: linear-gradient(135deg, #28a745 0%, #34ce57 100%);\n  border: none;\n  color: #ffffff;\n  padding: 8px 14px;\n  margin: 0;\n  border-radius: 4px;\n  flex: 1;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  font-family: inherit;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: \n    0 1px 4px rgba(40, 167, 69, 0.3),\n    0 1px 2px rgba(0, 0, 0, 0.2);\n  position: relative;\n  overflow: hidden;\n}\n\n.run-button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, \n    transparent, \n    rgba(255, 255, 255, 0.2), \n    transparent\n  );\n  transition: left 0.5s ease;\n}\n\n.run-button:hover {\n  background: linear-gradient(135deg, #218838 0%, #28a745 100%);\n  transform: translateY(-2px);\n  box-shadow: \n    0 4px 16px rgba(40, 167, 69, 0.4),\n    0 2px 6px rgba(0, 0, 0, 0.3);\n}\n\n.run-button:hover::before {\n  left: 100%;\n}\n\n.run-button:active {\n  transform: translateY(0);\n  box-shadow: \n    0 2px 4px rgba(40, 167, 69, 0.3),\n    0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.run-icon {\n  font-size: 14px;\n  display: inline-block;\n  transition: transform 0.3s ease;\n}\n\n.run-button:hover .run-icon {\n  transform: scale(1.2);\n}\n\n.run-button:active .run-icon {\n  transform: scale(0.9);\n}\n\n.params-list {\n  margin-top: 16px;\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 10px;\n  transition: all 0.3s ease;\n}\n\n/* 移除容器查询，完全使用JavaScript控制 */\n\n/* JavaScript控制的宽布局样式 */\n.params-list.wide-layout {\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n}\n\n/* 宽布局下的参数项调整 */\n.params-list.wide-layout .param-item {\n  padding: 10px;\n}\n\n.params-list.wide-layout .param-text-input,\n.params-list.wide-layout .param-number-input,\n.params-list.wide-layout .param-select {\n  font-size: 12px;\n  padding: 6px 10px;\n}\n\n.params-list.wide-layout .param-input {\n  font-size: 12px;\n  padding: 6px 10px;\n  rows: 2;\n}\n\n.param-item {\n  background: #333333;\n  border: 1px solid #404040;\n  border-radius: 6px;\n  padding: 12px;\n  margin-bottom: 0; /* 移除margin，使用grid gap */\n  transition: all 0.2s ease;\n  position: relative;\n  cursor: grab;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  user-select: none;\n  min-height: fit-content;\n}\n\n.param-item:active {\n  cursor: grabbing;\n}\n\n/* 移除pointer-events限制，通过JS逻辑控制拖拽 */\n\n.param-item:hover {\n  border-color: #555555;\n  background: #383838;\n}\n\n/* 拖拽状态样式 */\n.param-item.dragging {\n  opacity: 0.5;\n  transform: rotate(5deg);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n  z-index: 1000;\n}\n\n.param-item.drag-over {\n  border-color: #007acc;\n  background: #404040;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(0, 122, 204, 0.3);\n}\n\n/* 拖拽手柄样式 */\n.rei-drag-handle {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  color: #666666;\n  font-size: 16px;\n  line-height: 1;\n  cursor: grab;\n  padding: 4px;\n  border-radius: 3px;\n  transition: all 0.2s ease;\n  user-select: none;\n}\n\n.rei-drag-handle:hover {\n  color: #999999;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.param-item:active .rei-drag-handle {\n  cursor: grabbing;\n}\n\n/* 拖拽提示样式 */\n.params-list {\n  position: relative;\n}\n\n.param-item::before {\n  content: '';\n  position: absolute;\n  top: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background: #007acc;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.param-item.drag-over::before {\n  opacity: 1;\n}\n\n.param-input {\n  width: 100%;\n  background: #2a2a2a;\n  border: 1px solid #404040;\n  border-radius: 4px;\n  color: #ffffff;\n  padding: 8px 10px;\n  margin-top: 6px;\n  font-size: 12px;\n  font-weight: 400;\n  font-family: inherit;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  resize: vertical;\n  min-height: 60px;\n  line-height: 1.4;\n}\n\n.param-input:focus {\n  outline: none;\n  background: #333333;\n  border-color: #007acc;\n}\n\n.param-input:hover {\n  border-color: #555555;\n}\n\n.param-input::placeholder {\n  color: #999999;\n  font-style: normal;\n}\n\n/* 单行文本输入框样式 */\n.param-text-input {\n  width: 100%;\n  background: #2a2a2a;\n  border: 1px solid #404040;\n  border-radius: 4px;\n  color: #ffffff;\n  padding: 8px 12px;\n  margin-top: 6px;\n  font-size: 13px;\n  font-weight: 400;\n  font-family: inherit;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  height: 36px;\n}\n\n.param-text-input:focus {\n  outline: none;\n  background: #333333;\n  border-color: #007acc;\n}\n\n.param-text-input:hover {\n  border-color: #555555;\n}\n\n.param-text-input::placeholder {\n  color: #999999;\n  font-style: normal;\n}\n\n/* 数字输入框样式 */\n.param-number-input {\n  width: 100%;\n  background: #2a2a2a;\n  border: 1px solid #404040;\n  border-radius: 4px;\n  color: #ffffff;\n  padding: 8px 12px;\n  margin-top: 6px;\n  font-size: 13px;\n  font-weight: 400;\n  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  text-align: right;\n}\n\n.param-number-input:focus {\n  outline: none;\n  background: #333333;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);\n}\n\n.param-number-input:hover {\n  border-color: #555555;\n}\n\n/* 隐藏数字输入框的默认箭头 */\n.param-number-input::-webkit-outer-spin-button,\n.param-number-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.param-number-input[type=number] {\n  -moz-appearance: textfield;\n}\n\n/* 数字输入框的聚焦状态特效 */\n.param-number-input:focus {\n  background: linear-gradient(135deg, #2a2a2a 0%, #333333 100%);\n  color: #00d4ff;\n  text-shadow: 0 0 8px rgba(0, 212, 255, 0.3);\n}\n\n/* 下拉选择框样式 */\n.param-select {\n  width: 100%;\n  background: #2a2a2a;\n  border: 1px solid #404040;\n  border-radius: 4px;\n  color: #ffffff;\n  padding: 8px 12px;\n  margin-top: 6px;\n  font-size: 13px;\n  font-weight: 400;\n  font-family: inherit;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  cursor: pointer;\n  /* 简化的下拉箭头样式 */\n  background: #2a2a2a url(${g}) no-repeat;\n  background-position: right 8px center;\n  background-size: 16px;\n  padding-right: 32px;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.param-select:focus {\n  outline: none;\n  background: #333333 url(${m}) no-repeat;\n  background-position: right 8px center;\n  background-size: 16px;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);\n}\n\n.param-select:hover {\n  border-color: #555555;\n  background: #2a2a2a url(${h}) no-repeat;\n  background-position: right 8px center;\n  background-size: 16px;\n}\n\n/* 下拉选项样式 */\n.param-select option {\n  background: #2a2a2a;\n  color: #ffffff;\n  padding: 8px 12px;\n  border: none;\n}\n\n.param-select option:hover,\n.param-select option:checked {\n  background: #007acc;\n  color: #ffffff;\n}\n\n/* 禁用状态 */\n.param-select:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: #2a2a2a url(${b}) no-repeat;\n  background-position: right 8px center;\n  background-size: 16px;\n}\n\n/* 移除重复的CSS定义，使用上面的grid布局 */\n`,""]);const x=f},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<n.length;c++){var p=[].concat(n[c]);o&&i[p[0]]||(void 0!==a&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=a),t&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=t):p[2]=t),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),e.push(p))}},e}},401:n=>{n.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3e%3cpath stroke=%27%23999999%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27M6 8l4 4 4-4%27/%3e%3c/svg%3e"},417:n=>{n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},429:n=>{n.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3e%3cpath stroke=%27%23007acc%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27M6 8l4 4 4-4%27/%3e%3c/svg%3e"},526:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,".floating-panel {\n  background: #2a2a2a;\n  border: 1px solid #404040;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  user-select: none;\n}\n\n.floating-panel-header {\n  background: #333333;\n  padding: 8px 12px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n  border-bottom: 1px solid #404040;\n}\n\n.floating-panel-title {\n  color: #ffffff;\n  font-size: 14px;\n  font-weight: 500;\n  margin: 0;\n}\n\n.floating-panel-close {\n  background: none;\n  border: none;\n  color: #999999;\n  font-size: 18px;\n  cursor: pointer;\n  padding: 0;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n}\n\n.floating-panel-close:hover {\n  background: #555555;\n  color: #ffffff;\n}\n\n.floating-panel-content {\n  padding: 16px;\n  height: calc(100% - 41px);\n  overflow: auto;\n  color: #ffffff;\n}\n\n.floating-panel-resize-handle {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 16px;\n  height: 16px;\n  cursor: se-resize;\n  background: linear-gradient(\n    -45deg,\n    transparent 40%,\n    #666666 40%,\n    #666666 60%,\n    transparent 60%\n  );\n}\n\n.floating-panel-resize-handle:hover {\n  background: linear-gradient(\n    -45deg,\n    transparent 40%,\n    #888888 40%,\n    #888888 60%,\n    transparent 60%\n  );\n}\n\n/* 滚动条样式 */\n.floating-panel-content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.floating-panel-content::-webkit-scrollbar-track {\n  background: #1a1a1a;\n}\n\n.floating-panel-content::-webkit-scrollbar-thumb {\n  background: #555555;\n  border-radius: 3px;\n}\n\n.floating-panel-content::-webkit-scrollbar-thumb:hover {\n  background: #666666;\n} ",""]);const s=i},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},567:n=>{n.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3e%3cpath stroke=%27%23666666%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27M6 8l4 4 4-4%27/%3e%3c/svg%3e"},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},848:(n,e,t)=>{n.exports=t(20)},883:e=>{e.exports=n}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,exports:{}};return e[n](a,a.exports,o),a.exports}o.m=e,o.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return o.d(e,{a:e}),e},o.d=(n,e)=>{for(var t in e)o.o(e,t)&&!o.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),o.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.b=document.baseURI||self.location.href,o.nc=void 0;var r={};o.r(r),o.d(r,{FloatingPanel:()=>w,ReiToolsAPI:()=>Z,ReiToolsPanel:()=>C,addNodeToCanvas:()=>R,cleanupUnconnectedNodes:()=>$,clearAllStorageData:()=>G,connectNodes:()=>P,copyNodeInfo:()=>z,deleteSelectedNodes:()=>T,deleteWorkflowTemplate:()=>q,exportWorkflow:()=>I,getAllNodes:()=>j,getComfyUIApp:()=>N,getSelectedNodes:()=>S,importWorkflow:()=>L,initReiTools:()=>Q,isComfyUILoaded:()=>E,loadFromStorage:()=>F,loadPanelConfig:()=>B,loadUserPreferences:()=>Y,loadWorkflowTemplates:()=>J,removeFromStorage:()=>D,savePanelConfig:()=>W,saveToStorage:()=>U,saveUserPreferences:()=>V,saveWorkflowTemplate:()=>H});var a=o(848),i=o(883),s=o(72),l=o.n(s),c=o(825),p=o.n(c),d=o(659),u=o.n(d),f=o(56),g=o.n(f),m=o(540),h=o.n(m),b=o(113),x=o.n(b),v=o(526),y={};y.styleTagTransform=x(),y.setAttributes=g(),y.insert=u().bind(null,"head"),y.domAPI=p(),y.insertStyleElement=h(),l()(v.A,y),v.A&&v.A.locals&&v.A.locals;const w=({title:n="工具面板",visible:e=!0,position:t={x:100,y:100},size:o={width:400,height:300},onClose:r,onMove:s,onResize:l,children:c,className:p="",zIndex:d=1e3})=>{const[u,f]=(0,i.useState)(t),[g,m]=(0,i.useState)(o),[h,b]=(0,i.useState)(!1),[x,v]=(0,i.useState)(!1),[y,w]=(0,i.useState)({x:0,y:0}),k=(0,i.useRef)(null),_=(0,i.useCallback)(n=>{(n.target===n.currentTarget||n.target.classList.contains("floating-panel-header"))&&(b(!0),w({x:n.clientX-u.x,y:n.clientY-u.y}),n.preventDefault())},[u]),C=(0,i.useCallback)(n=>{if(h){const e={x:n.clientX-y.x,y:n.clientY-y.y};f(e),s?.(e)}},[h,y,s]),N=(0,i.useCallback)(()=>{b(!1),v(!1)},[]),E=(0,i.useCallback)(n=>{v(!0),n.preventDefault(),n.stopPropagation()},[]),S=(0,i.useCallback)(n=>{if(x&&k.current){const e=k.current.getBoundingClientRect(),t={width:Math.max(200,n.clientX-e.left),height:Math.max(150,n.clientY-e.top)};m(t),l?.(t)}},[x,l]);return(0,i.useEffect)(()=>(h&&(document.addEventListener("mousemove",C),document.addEventListener("mouseup",N)),x&&(document.addEventListener("mousemove",S),document.addEventListener("mouseup",N)),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",N)}),[h,x,C,S,N]),e?(0,a.jsxs)("div",{ref:k,className:`floating-panel ${p}`,style:{position:"fixed",left:u.x,top:u.y,width:g.width,height:g.height,zIndex:d},onMouseDown:_,children:[(0,a.jsxs)("div",{className:"floating-panel-header",children:[(0,a.jsx)("span",{className:"floating-panel-title",children:n}),r&&(0,a.jsx)("button",{className:"floating-panel-close",onClick:r,type:"button",children:"×"})]}),(0,a.jsx)("div",{className:"floating-panel-content",children:c}),(0,a.jsx)("div",{className:"floating-panel-resize-handle",onMouseDown:E})]}):null};var k=o(267),_={};_.styleTagTransform=x(),_.setAttributes=g(),_.insert=u().bind(null,"head"),_.domAPI=p(),_.insertStyleElement=h(),l()(k.A,_),k.A&&k.A.locals&&k.A.locals;const C=({visible:n=!0,onClose:e})=>{const[t,o]=(0,i.useState)("paramFocus"),[r,s]=(0,i.useState)([]),[l,c]=(0,i.useState)({}),[p,d]=(0,i.useState)(null),[u,f]=(0,i.useState)(null),[g,m]=(0,i.useState)(!1),h=n=>{o(n)};(0,i.useEffect)(()=>{Object.entries(l).forEach(([n,e])=>{const[t,o,r]=n.split("_"),a=window.comfyUIAPP?.graph?.getNodeById(t);if(a){const n=a.widgets.find(n=>"value"===n.name);n&&(n.value=e),n.callback&&n.callback(e,n,a)}}),window.comfyUIAPP?.canvas.setDirty(!0,!0)},[l]);const b=()=>{d(null),f(null)},x=n=>{n.preventDefault(),setTimeout(()=>{b()},50)};return(0,i.useEffect)(()=>{m(!1)},[]),(0,a.jsxs)(w,{title:"ReiTools 工具面板",visible:n,onClose:e,position:{x:50,y:50},size:{width:350,height:500},className:"reitools-panel",onResize:n=>{m(n.width>=500)},children:[(0,a.jsxs)("div",{className:"reitools-tabs",children:[(0,a.jsx)("button",{className:"tab "+("paramFocus"===t?"active":""),onClick:()=>h("paramFocus"),children:"参数聚焦"}),(0,a.jsx)("button",{className:"tab "+("info"===t?"active":""),onClick:()=>h("info"),children:"信息"})]}),(0,a.jsxs)("div",{className:"reitools-content",children:["tools"===t&&(0,a.jsxs)("div",{className:"tools-section",children:[(0,a.jsx)("h3",{children:"快捷工具"}),(0,a.jsxs)("div",{className:"tool-group",children:[(0,a.jsx)("button",{className:"tool-button",children:"📋 复制节点信息"}),(0,a.jsx)("button",{className:"tool-button",children:"🔧 批量修改参数"}),(0,a.jsx)("button",{className:"tool-button",children:"📂 导出配置"}),(0,a.jsx)("button",{className:"tool-button",children:"📥 导入配置"})]}),(0,a.jsx)("h3",{children:"节点操作"}),(0,a.jsxs)("div",{className:"tool-group",children:[(0,a.jsx)("button",{className:"tool-button",children:"➕ 添加常用节点"}),(0,a.jsx)("button",{className:"tool-button",children:"🔗 连接选中节点"}),(0,a.jsx)("button",{className:"tool-button",children:"🗑️ 清理未连接节点"})]})]}),"paramFocus"===t&&(0,a.jsxs)("div",{className:"param-focus-section",children:[(0,a.jsx)("div",{className:"info-section",children:"介绍"}),(0,a.jsxs)("div",{className:"button-group",children:[(0,a.jsxs)("button",{className:"refresh-button",onClick:()=>{const n=window.comfyUIAPP?.graph._nodes,e=n.filter(n=>"PrimitiveNode"===n.type),t=[],o={};e.forEach(n=>{n.outputs?.length>0&&n.outputs[0].links?.length>0&&n.outputs[0].links.forEach(e=>{const r=window.comfyUIAPP?.graph?.links[e];if(r){const e=r.type,a=window.comfyUIAPP?.graph?.getNodeById(r.target_id),i=a.inputs[r.target_slot],s=n.widgets.find(n=>"value"===n.name);t.push({target_id:r.target_id,target_slot:r.target_slot,id:r.origin_id,name:i?.localized_name||i?.name,type:"string"===e.toLowerCase()?s.type:e,title:a.title,downstreamNode:a,primaryNode:n,comboOptions:s?.options?.values||[]}),s&&(o[`${r.origin_id}_${r.target_id}_${r.target_slot}`]=s.value)}})}),s(t),c(o)},children:[(0,a.jsx)("span",{className:"refresh-icon",children:"🔄"}),"刷新参数列表"]}),(0,a.jsxs)("button",{className:"run-button",onClick:()=>{window.comfyUIAPP?.queuePrompt(0)},children:[(0,a.jsx)("span",{className:"run-icon",children:"▶️"}),"运行"]})]}),(0,a.jsx)("div",{className:"params-list "+(g?"wide-layout":""),children:r.map((n,e)=>(0,a.jsxs)("div",{className:`param-item ${p===e?"dragging":""} ${u===e?"drag-over":""}`,draggable:!0,onDragStart:n=>((n,e)=>{const t=n.target;t.closest("input")||t.closest("textarea")||t.closest("select")?n.preventDefault():(d(e),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/html",""))})(n,e),onDragOver:n=>((n,e)=>{n.preventDefault(),n.stopPropagation(),null!==p&&p!==e&&(n.dataTransfer.dropEffect="move",f(e))})(n,e),onDragLeave:n=>(n=>{n.preventDefault();const e=n.currentTarget.getBoundingClientRect(),t=n.clientX,o=n.clientY;(t<e.left||t>e.right||o<e.top||o>e.bottom)&&f(null)})(n),onDrop:n=>((n,e)=>{if(n.preventDefault(),n.stopPropagation(),null===p||p===e)return void b();const t=[...r],o=t[p];let a=e;p<e&&(a=e-1),t.splice(p,1),t.splice(a,0,o),console.log("Drag operation:",{from:p,to:e,targetIndex:a,itemId:o.id}),s(t),b()})(n,e),onDragEnd:x,children:[(0,a.jsx)("div",{className:"rei-drag-handle",children:"⋮⋮"}),n.title," (",n.name,")","text"===n.type.toLowerCase()&&(0,a.jsx)("input",{type:"text",className:"param-text-input",value:l[`${n.id}_${n.target_id}_${n.target_slot}`]||"",onChange:e=>{c({...l,[`${n.id}_${n.target_id}_${n.target_slot}`]:e.target.value})}}),("string"===n.type.toLowerCase()||"customtext"===n.type.toLowerCase())&&(0,a.jsx)("textarea",{className:"param-input",rows:g?2:3,value:l[`${n.id}_${n.target_id}_${n.target_slot}`]||"",onChange:e=>{c({...l,[`${n.id}_${n.target_id}_${n.target_slot}`]:e.target.value})}}),("int"===n.type.toLowerCase()||"float"===n.type.toLowerCase())&&(0,a.jsx)("input",{type:"number",step:"float"===n.type.toLowerCase()?"0.01":"1",className:"param-number-input",value:l[`${n.id}_${n.target_id}_${n.target_slot}`]||"",onChange:e=>{c({...l,[`${n.id}_${n.target_id}_${n.target_slot}`]:e.target.value})}}),"combo"===n.type.toLowerCase()&&(0,a.jsx)("select",{className:"param-select",value:l[`${n.id}_${n.target_id}_${n.target_slot}`]||"",onChange:e=>{c({...l,[`${n.id}_${n.target_id}_${n.target_slot}`]:e.target.value})},children:n.comboOptions.map(n=>(0,a.jsx)("option",{value:n,children:n},n))})]},`${n.id}_${n.target_id}_${n.target_slot}`))})]}),"info"===t&&(0,a.jsxs)("div",{className:"info-section",children:[(0,a.jsx)("h3",{children:"关于 ReiTools"}),(0,a.jsx)("p",{children:"版本：1.4.2"}),(0,a.jsx)("p",{children:"作者：natsurei"}),(0,a.jsx)("p",{children:"这是一个用于 ComfyUI 的增强工具集，提供了各种便捷的功能和界面改进。"}),(0,a.jsx)("div",{className:"links",children:(0,a.jsx)("a",{href:"https://github.com/x956606865/ComfyUI-ReiTools",target:"_blank",rel:"noopener noreferrer",children:"GitHub 仓库"})})]})]})]})},N=()=>window.app||null,E=()=>!(!window.app||!window.app.graph),S=()=>{const n=N();if(!n||!n.canvas)return[];const e=n.canvas.selected_nodes||{};return Object.values(e)},j=()=>{const n=N();return n&&n.graph&&n.graph._nodes||[]},R=(n,e)=>{const t=N();if(!t||!t.graph||!t.createNode)return null;const o=e||{x:100,y:100};return t.graph.add(t.createNode(n),o.x,o.y)},P=(n,e,t,o)=>{const r=N();if(!r||!r.graph)return!1;try{return r.graph.connect(n.id,e,t.id,o)}catch(n){return console.error("Failed to connect nodes:",n),!1}},T=()=>{const n=N();n&&n.canvas&&(S().forEach(e=>{n.graph.remove(e)}),n.canvas.selectNodes([]))},z=n=>{const e={type:n.type,position:n.pos,size:n.size,widgets:n.widgets?.map(n=>({name:n.name,value:n.value}))||[],inputs:n.inputs?.map(n=>({name:n.name,type:n.type}))||[],outputs:n.outputs?.map(n=>({name:n.name,type:n.type}))||[]},t=JSON.stringify(e,null,2);navigator.clipboard.writeText(t).catch(console.error)},I=()=>{const n=N();if(!n||!n.graph)return null;try{return n.graph.serialize()}catch(n){return console.error("Failed to export workflow:",n),null}},L=n=>{const e=N();if(!e||!e.graph)return!1;try{return e.graph.clear(),e.graph.configure(n),!0}catch(n){return console.error("Failed to import workflow:",n),!1}},$=()=>{const n=j(),e=[];n.forEach(n=>{const t=n.inputs?.some(n=>n.link)||!1,o=n.outputs?.some(n=>n.links&&n.links.length>0)||!1;t||o||e.push(n)});const t=N();return t&&t.graph&&e.forEach(n=>{t.graph.remove(n)}),e.length},O={PANEL_CONFIG:"reitools_panel_config",USER_PREFERENCES:"reitools_user_preferences",WORKFLOW_TEMPLATES:"reitools_workflow_templates"},A={position:{x:50,y:50},size:{width:350,height:500},visible:!1,activeTab:"tools"},M={enableShortcuts:!0,showNodePreview:!0,autoSave:!1,defaultPosition:"top-left",opacity:1},U=(n,e)=>{try{localStorage.setItem(n,JSON.stringify(e))}catch(n){console.error("Failed to save to storage:",n)}},F=(n,e)=>{try{const t=localStorage.getItem(n);return t?JSON.parse(t):e}catch(n){return console.error("Failed to load from storage:",n),e}},D=n=>{try{localStorage.removeItem(n)}catch(n){console.error("Failed to remove from storage:",n)}},W=n=>{const e={...B(),...n};U(O.PANEL_CONFIG,e)},B=()=>F(O.PANEL_CONFIG,A),V=n=>{const e={...Y(),...n};U(O.USER_PREFERENCES,e)},Y=()=>F(O.USER_PREFERENCES,M),H=(n,e)=>{const t=J();t[n]={name:n,workflow:e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},U(O.WORKFLOW_TEMPLATES,t)},J=()=>F(O.WORKFLOW_TEMPLATES,{}),q=n=>{const e=J();delete e[n],U(O.WORKFLOW_TEMPLATES,e)},G=()=>{Object.values(O).forEach(n=>{D(n)})};class K{constructor(){this.panelContainer=null,this.isInitialized=!1,this.panelVisible=!1,this.init()}init(){if(this.isInitialized)return;const n=()=>{E()?(this.setupUI(),this.isInitialized=!0):setTimeout(n,100)};n()}setupUI(){this.panelContainer=document.createElement("div"),this.panelContainer.id="reitools-panel-container",this.panelContainer.style.position="fixed",this.panelContainer.style.top="0",this.panelContainer.style.right="0",this.panelContainer.style.width="100%",this.panelContainer.style.height="100%",this.panelContainer.style.pointerEvents="none",this.panelContainer.style.zIndex="10000",document.body.appendChild(this.panelContainer),this.addToolbarButton();const n=B();this.panelVisible=n.visible,this.renderPanel()}addToolbarButton(){const n=document.createElement("button");n.innerHTML="🔧 ReiTools",n.style.margin="0 5px",n.style.padding="5px 10px",n.style.backgroundColor="#333",n.style.color="#fff",n.style.border="1px solid #555",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.style.zIndex="10000",n.style.position="fixed",n.style.bottom="20px",n.style.right="70px",n.style.width="90px",n.style.height="40px",n.id="reitools-toolbar-button",n.addEventListener("click",()=>{this.togglePanel()}),n.addEventListener("mouseenter",()=>{n.style.backgroundColor="#555"}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor="#333"}),document.body.appendChild(n)}togglePanel(){this.panelVisible=!this.panelVisible,W({visible:this.panelVisible}),this.renderPanel()}showPanel(){this.panelVisible=!0,W({visible:this.panelVisible}),this.renderPanel()}hidePanel(){this.panelVisible=!1,W({visible:this.panelVisible}),this.renderPanel()}renderPanel(){if(this.panelContainer&&(this.panelContainer.innerHTML="",this.panelVisible)){if(void 0===window.React||void 0===window.ReactDOM){console.warn("React or ReactDOM not available, waiting...");const n=document.createElement("div");return n.style.pointerEvents="auto",n.innerHTML='\n          <div style="\n            position: fixed; \n            top: 100px; \n            right: 100px; \n            background: #2a2a2a; \n            color: white; \n            padding: 20px; \n            border-radius: 8px;\n            border: 1px solid #404040;\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n          ">\n            <div>🔧 ReiTools 正在加载...</div>\n            <div style="font-size: 12px; color: #999; margin-top: 8px;">等待 React 依赖加载完成</div>\n          </div>\n        ',this.panelContainer.appendChild(n),void setTimeout(()=>this.renderPanel(),200)}const n=document.createElement("div");n.style.pointerEvents="auto",this.panelContainer.appendChild(n);try{const e=window.React,t=window.ReactDOM,o=e.createElement(C,{visible:this.panelVisible,onClose:()=>this.hidePanel()});t.createRoot?t.createRoot(n).render(o):t.render(o,n),console.log("ReiTools panel rendered successfully")}catch(e){console.error("Failed to render React component:",e),n.innerHTML=`\n          <div style="\n            position: fixed; \n            top: 100px; \n            left: 100px; \n            background: #2a2a2a; \n            color: #ff6b6b; \n            padding: 20px; \n            border-radius: 8px;\n            border: 1px solid #ff6b6b;\n            font-family: monospace;\n            max-width: 400px;\n          ">\n            <h3 style="margin: 0 0 10px 0; color: #ff6b6b;">ReiTools UI 加载错误</h3>\n            <p style="margin: 0 0 10px 0;">React 组件渲染失败，请检查控制台获取详细信息。</p>\n            <details style="margin-top: 10px;">\n              <summary style="cursor: pointer;">错误详情</summary>\n              <pre style="margin: 10px 0 0 0; font-size: 11px; overflow: auto;">${e?.message||"未知错误"}</pre>\n            </details>\n            <button onclick="this.parentElement.style.display='none'" style="\n              background: #333; \n              border: 1px solid #555; \n              color: white; \n              padding: 5px 10px; \n              border-radius: 4px; \n              cursor: pointer;\n              margin-top: 10px;\n            ">关闭</button>\n          </div>\n        `}}}}let X=null;const Q=()=>(X||(X=new K),X),Z={init:Q,toggle:()=>X?.togglePanel(),show:()=>X?.showPanel(),hide:()=>X?.hidePanel()};return"undefined"!=typeof window&&(window.ReiToolsUI=Z,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Q):setTimeout(Q,100)),r})());